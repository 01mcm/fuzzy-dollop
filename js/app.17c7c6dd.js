(function(e){function t(t){for(var r,s,c=t[0],i=t[1],a=t[2],m=0,f=[];m<c.length;m++)s=c[m],Object.prototype.hasOwnProperty.call(u,s)&&u[s]&&f.push(u[s][0]),u[s]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);l&&l(t);while(f.length)f.shift()();return o.push.apply(o,a||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,c=1;c<n.length;c++){var i=n[c];0!==u[i]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},u={app:0},o=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var a=0;a<c.length;a++)t(c[a]);var l=i;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"0782":function(e,t,n){},3017:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("99af");var r,u=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},s=[],c={name:"App",data:function(){return{socketId:""}},computed:{messages:function(){return this.$store.state.messages}},components:{},sockets:{socket_serverMessage:function(e,t){e.commit("SEND_MESSAGE",t)},socket_serverMessages:function(e,t){e.commit("SEND_MESSAGES",t)},SEND_MESSAGES:function(e,t){e.messages=t}}},i=c,a=(n("034f"),n("2877")),l=Object(a["a"])(i,o,s,!1,null,null,null),m=l.exports,f=(n("b0c0"),n("8c4f")),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"input"},[e._v(" Enter a username: "),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.username,expression:"username",modifiers:{trim:!0}}],staticClass:"username",attrs:{type:"text",name:"username",placeholder:"Username"},domProps:{value:e.username},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enterGame(t)},input:function(t){t.target.composing||(e.username=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),e.userExists?n("div",[e._v(" Username already taken ")]):e._e(),n("div",[n("button",{on:{click:e.enterGame}},[e._v("Enter game")])])])},d=[],p={name:"Login",data:function(){return{username:""}},methods:{enterGame:function(){this.$store.dispatch("login",this.username)}},computed:{userExists:function(){return this.$store.state.invalidUser}}},v=p,_=(n("b129"),Object(a["a"])(v,h,d,!1,null,"f9c43f9e",null)),g=_.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",["idle"==e.screen?n("div",[n("idle")],1):"match"==e.screen?n("div",[n("match")],1):"result"==e.screen?n("div",[n("result")],1):e._e()])},k=[],w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"about"},[n("h1",[e._v("Match")]),0!=e.counter?n("h2",[e._v(e._s(e.counter))]):e._e(),0!=e.counter||e.turn?e._e():n("div",[n("button",{on:{click:function(t){return e.makeTurn("rock")}}},[e._v("Rock")]),n("button",{on:{click:function(t){return e.makeTurn("paper")}}},[e._v("Paper")]),n("button",{on:{click:function(t){return e.makeTurn("scissors")}}},[e._v("Scissors")])]),e.turn?n("div",[n("div",[e._v("Your choice: "+e._s(e.turn))]),n("div",[e._v("Waiting for opponent...")])]):e._e()])},E=[],O={components:{},data:function(){return{counter:3}},mounted:function(){var e=this,t=setInterval((function(){e.counter--,0==e.counter&&clearInterval(t)}),1e3)},methods:{makeTurn:function(e){this.$store.dispatch("makeTurn",{turn:e})}},computed:{turn:function(){return this.$store.state.turn},mode:function(){return this.$store.state.mode}}},M=O,y=Object(a["a"])(M,w,E,!1,null,null,null),j=y.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("button",{on:{click:e.logout}},[e._v("Logout")]),n("h2",[e._v("Available users")]),n("ul",e._l(e.users,(function(t,r){return n("li",{key:r,style:e.userColor(t),on:{click:function(n){return e.requestMatch(t)}}},[n("span",[e._v(e._s(t.username))]),t.matchRequest==e.user.username?n("span",[e._v(e._s(t.username)+" wants to play with you")]):n("span",[e._v("No match request")])])})),0)])},$=[],T=(n("4de4"),{name:"Home",methods:{requestMatch:function(e){this.$store.dispatch("requestMatch",e)},userColor:function(e){return e.matchRequest==this.user.username?{backgroundColor:"rgba(200,50,50,0.4)"}:this.$store.state.matchRequest&&this.$store.state.matchRequest.username==e.username?{backgroundColor:"rgba(50,200,50,0.4)"}:void 0},logout:function(){this.$store.dispatch("logout")}},computed:{users:function(){var e=this;return this.$store.state.users.filter((function(t){return t.username!==e.user.username})).filter((function(e){return 0==e.inMatch}))},user:function(){return this.$store.state.user}}}),x=T,R=(n("b990"),Object(a["a"])(x,S,$,!1,null,"a0655ed6",null)),A=R.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"about"},[n("h1",[e._v("Result")]),e.winner?n("div",[e._v(e._s(e.winner.username)+" wins!")]):e._e(),null==e.winner?n("div",[e._v("Draw!")]):e._e(),n("table",e._l(e.users,(function(t,r){return n("tr",{key:r},[n("td",[e._v(e._s(t.username))]),n("td",[e._v(e._s(t.turn))])])})),0),n("button",{on:{click:e.newMatch}},[e._v("Start a new match")])])},q=[],C={methods:{newMatch:function(){this.$store.dispatch("newMatch")}},computed:{winner:function(){return this.$store.state.winner},users:function(){return this.$store.state.users}}},U=C,I=Object(a["a"])(U,P,q,!1,null,null,null),L=I.exports,G={name:"Game",components:{Match:j,Idle:A,Result:L},computed:{screen:function(){return this.$store.state.screen}}},N=G,D=(n("b787"),Object(a["a"])(N,b,k,!1,null,"beed3f82",null)),H=D.exports,W=n("ade3"),Y=n("9ce4"),J=n("0e44"),K="LOGIN_PLAYER",Q="LOGOUT_PLAYER",X="PLAYER_EXISTS",z="UPDATE_PLAYERS",B="START_MATCH",F="MAKE_TURN",V="MATCH_REQUESTED",Z="END_MATCH",ee="NEW_MATCH",te="SET_MODE";u["a"].use(Y["a"]);var ne=new Y["a"].Store({plugins:[Object(J["a"])()],state:{user:null,users:[],screen:"login",invalidUser:!1,inMatchWith:null,winner:null,matchRequest:null,turn:null,mode:"speech"},mutations:(r={},Object(W["a"])(r,K,(function(e,t){e.user=t,e.screen="idle",e.invalidUser=!1,e.inMatchWith=null,e.matchRequest=null,e.turn=null})),Object(W["a"])(r,Q,(function(e){e.user=null})),Object(W["a"])(r,X,(function(e){e.invalidUser=!0})),Object(W["a"])(r,z,(function(e,t){e.users=t})),Object(W["a"])(r,B,(function(e,t){e.inMatchWith=t,e.matchRequest=null,e.screen="match"})),Object(W["a"])(r,F,(function(e,t){e.turn=t.turn})),Object(W["a"])(r,Z,(function(e,t){e.winner=t.winner,e.screen="result"})),Object(W["a"])(r,ee,(function(e){e.winner=null,e.turn=null,e.screen="idle"})),Object(W["a"])(r,V,(function(e,t){e.matchRequest=t})),Object(W["a"])(r,te,(function(e,t){e.mode=t})),r),actions:{login:function(e,t){this.socket.emit("login",t)},logout:function(e){var t=e.state;this.socket.emit("logout",t.user.username)},requestMatch:function(e,t){var n=e.commit;n(V,t),this.socket.emit("requestMatch",{opponent:t})},makeTurn:function(e,t){var n=e.commit;n(F,t),this.socket.emit("makeTurn",{turn:t})},newMatch:function(e){var t=e.commit;t(ee),this.socket.emit("newMatch")},setMode:function(e,t){var n=e.commit;n(te,t)},socket_userLoggedIn:function(e,t){var n=e.commit;n(K,t),se.push({name:"game"}).catch((function(){}))},socket_userExists:function(e){var t=e.commit;t(X)},socket_userLoggedOut:function(e,t){var n=e.commit;n(Q,t),se.push({name:"login"}).catch((function(){}))},socket_players:function(e,t){var n=e.commit;n(z,t)},socket_startMatch:function(e,t){var n=e.commit;n(B,t)},socket_matchResult:function(e,t){var n=e.commit;n(Z,t)}},getters:{loggedIn:function(e){return null!==e.user}}}),re=ne;u["a"].use(f["a"]);var ue=[{path:"/login",name:"login",component:g},{path:"/game",name:"game",component:H}],oe=new f["a"]({mode:"history",base:"/",routes:ue}),se=oe;oe.beforeEach((function(e,t,n){re.getters.loggedIn&&"login"==e.name?n("game"):re.getters.loggedIn||"login"==e.name?n():n("login")}));var ce=n("5132"),ie=n.n(ce),ae=n("8e27"),le=n.n(ae),me="".concat(window.location.protocol,"//").concat(window.location.hostname,":8081");me="[https://glitch.com/edit/#!/functioning-server-clau]";var fe=le()(me,{});re.$socket=fe,null!=re.state.user&&re.dispatch("login",re.state.user.username);var he=new ie.a({debug:!1,connection:fe,vuex:{store:re,actionPrefix:"socket_"}});u["a"].use(he),u["a"].config.productionTip=!1,new u["a"]({router:se,store:re,render:function(e){return e(m)}}).$mount("#app")},"85ec":function(e,t,n){},b129:function(e,t,n){"use strict";n("f689")},b787:function(e,t,n){"use strict";n("0782")},b990:function(e,t,n){"use strict";n("3017")},f689:function(e,t,n){}});
//# sourceMappingURL=app.17c7c6dd.js.map